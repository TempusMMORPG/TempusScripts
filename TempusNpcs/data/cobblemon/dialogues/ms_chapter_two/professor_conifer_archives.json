{
    "initializationAction": [
        "q.player.data.dialogue.professor_conifer_archives_key_inform && q.player.data.dialogue.dan == false ? q.dialogue.set_page('go_to_dan');",
        "q.player.data.dialogue.laurel_inform && q.player.data.dialogue.professor_conifer_archives_post_craft && q.player.data.dialogue.professor_conifer_archives_key_inform == false ? q.dialogue.set_page('return_to_conifer');",
        "q.player.data.dialogue.professor_conifer_archives_post_craft && q.player.data.dialogue.laurel_inform == false ? q.dialogue.set_page('hurry');",
        "q.player.data.regalis_grunt_2a_1_defeated && q.player.data.regalis_grunt_2a_2_defeated && q.player.data.regalis_grunt_2a_3_defeated && q.player.data.regalis_grunt_2a_4_defeated && q.player.data.regalis_grunt_2a_5_defeated && q.player.data.dialogue.professor_conifer_archives_pre_craft && q.player.data.dialogue.professor_conifer_archives_post_craft == false ? q.dialogue.set_page('after_regalis_grunts');",
        "(q.player.data.regalis_grunt_2a_1_defeated == false || q.player.data.regalis_grunt_2a_2_defeated == false || q.player.data.regalis_grunt_2a_3_defeated == false || q.player.data.regalis_grunt_2a_4_defeated == false || q.player.data.regalis_grunt_2a_5_defeated == false) && q.player.data.dialogue.professor_conifer_archives_pre_craft ? q.dialogue.set_page('stop_them');",
        "q.player.data.ch1_completed && q.player.data.dialogue.professor_conifer_archives_pre_craft == false ? q.dialogue.set_page('greeting');"
    ],
    "speakers": {
        "npc": {
            "name": {
                "type": "expression",
                "expression": "q.npc.name"
            },
            "face": "q.npc.face();"
        },
        "player": {
            "face": "q.player.face();",
            "name": {
                "type": "expression",
                "expression": "q.player.username"
            }
        }
    },
    "pages": [
        {
            "id": "1",
            "speaker": "npc",
            "lines": [
                "..."
            ],
            "input": "q.dialogue.close();"
        },
        {
            "id": "greeting",
            "escapeAction": "0",
            "speaker": "npc",
            "lines": [
                "Shhh! Keep it down! They're talking about something down there."
            ],
            "input": {
                "type": "option",
                "vertical": true,
                "options": [
                    {
                        "text": "Who?",
                        "value": "who",
                        "action": [
                            "q.dialogue.set_page('stop_them');"
                        ]
                    }
                ]
            }
        },
        {
            "id": "stop_them",
            "escapeAction": "0",
            "speaker": "npc",
            "lines": [
                "The Regalis! I can't quite hear what they're saying, but they're ripping pages out of the books. Quick we need to stop them! Get down there!"
            ],
            "input": {
                "type": "option",
                "vertical": true,
                "options": [
                    {
                        "text": "Okay!",
                        "value": "okay",
                        "action": [
                            "q.run_command('ftbquests change_progress ' + q.player.username + ' complete 4859F624CD9E4298');",
                            "q.player.data.dialogue.professor_conifer_archives_pre_craft = 1; q.player.save_data();",
                            "q.dialogue.close();"
                        ]
                    }
                        ]
                    }
            },
        {
            "id": "after_regalis_grunts",
            "escapeAction": "0",
            "speaker": "npc",
            "lines": [
                "Nice work! Give me the pages..."
            ],
            "input": "q.dialogue.set_page('page_crafting');"
        },
        {
            "id": "page_crafting",
            "escapeAction": "0",
            "speaker": "npc",
            "lines": [
                "..."
            ],
            "input": "q.dialogue.set_page('after_page_crafting');"
        },
        {
            "id": "after_page_crafting",
            "escapeAction": "0",
            "speaker": "npc",
            "lines": [
                "Ok, I'm finished. It's a book detailing the process to access the Distortion World..."
            ],
            "input": {
                "type": "option",
                "vertical": true,
                "options": [
                    {
                        "text": "Distortion World?!",
                        "value": "distortion_world",
                        "action": [
                            "q.run_command('ftbquests change_progress ' + q.player.username + ' complete 388F89F300513468');",
                            "q.player.data.dialogue.professor_conifer_archives_post_craft = 1; q.player.save_data();",
                            "q.dialogue.set_page('inform_laurel');"
                        ]
                    }
                        ]
                    }
        },
        {
            "id": "inform_laurel",
            "speaker": "npc",
            "lines": [
                "Go and tell Professor Laurel! I'll meet you back here!"
            ],
            "input": {
                "type": "option",
                "vertical": true,
                "options": [
                    {
                        "text": "O-okay!",
                        "value": "goodbye",
                        "action": [
                            "q.dialogue.close();"
                        ]
                    }
                        ]
                    }
        },
        {
            "id": "return_to_conifer",
            "escapeAction": "0",
            "speaker": "npc",
            "lines": [
                "Ah! You're back! Good, so it says in the book there are four keys needed to access the Distortion World."
            ],
            "input": "q.dialogue.set_page('return_to_conifer_2');"
        },
        {
            "id": "return_to_conifer_2",
            "escapeAction": "0",
            "speaker": "npc",
            "lines": [
                "The Regalis already have the Arceus Key which only leaves three somewhere out there."
            ],
            "input": {
                "type": "option",
                "vertical": true,
                "options": [
                    {
                        "text": "What should I do?",
                        "value": "what_should_i_do",
                        "action": [
                            "q.run_command('ftbquests change_progress ' + q.player.username + ' complete 388F89F300513468');",
                            "q.player.data.dialogue.professor_conifer_archives_key_inform = 1; q.player.save_data();",
                            "q.dialogue.set_page('go_to_dan');"
                        ]
                    }
                        ]
                    }
        },
        {
            "id": "go_to_dan",
            "escapeAction": "0",
            "speaker": "npc",
            "lines": [
                "Well.... I have a friend who might know where the Giratina Key is."
            ],
            "input": "q.dialogue.set_page('dan');"
        },
        {
            "id": "dan",
            "speaker": "npc",
            "lines": [
                "His name is Daniel, he's the museum curator in La Relance and he really knows his stuff."
            ],
            "input": {
                "type": "option",
                "vertical": true,
                "options": [
                    {
                        "text": "I'll see what I can do",
                        "value": "ill_see_what_i_can_do",
                        "action": [
                            "q.dialogue.close();"
                        ]
                    }
                        ]
                    }
        },
        {
            "id": "hurry",
            "speaker": "npc",
            "lines": [
                "Quickly! Go and tell Professor Laurel!"
            ],
            "input": {
                "type": "option",
                "vertical": true,
                "options": [
                    {
                        "text": "O-okay!",
                        "value": "goodbye",
                        "action": [
                            "q.dialogue.close();"
                        ]
                    }
                        ]
                    }
        },
        {
            "id": "farewell",
            "speaker": "npc",
            "lines": [
                "See ya later!"
            ],
            "input": {
                "type": "option",
                "vertical": true,
                "options": [
                    {
                        "text": "Goodbye",
                        "value": "goodbye",
                        "action": [
                            "q.dialogue.close();"
                        ]
                    }
                        ]
                    }
        }
    ]
}